<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.17">
<title>Kubernetes - Workshop</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article">
<div id="header">
</div>
<div id="content">
<div class="sect1">
<h2 id="_kubernetes_workshop">Kubernetes - Workshop</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This is just an intro, which tights to the presentation of Modern Application. During our CEO meeting onsite at VMware in Palo Alto, we will cover a lots of new Modern Ways. As we will present Tanzu, AKO, MAKO, OpenShift etc, we feel a little background on how things work is good for you before you come onsite.
For this workshop we will leverage kind.<br>
KIND is a tool for running local Kubernetes clusters using Docker container ‚Äúnodes‚Äù. <strong>KIND Kubernetes in Docker</strong>
KIND was primarily designed for testing Kubernetes itself, but may be used for local development or CI. We also have some testing to run Tanzu<br>
<a href="https://tanzu.vmware.com/developer/guides/gs-tap-on-kind-pt1/">KIND VMware Beta Site</a></p>
</div>
<div class="paragraph">
<p>We will first build a simple cluster with a specific name. If you omit the flag --name default name will be KIND.
As we get a little more familiar with kind cli, keep in mind that the other tool we could have selected was minikube, however, KIND is newer and allows you to run a small kubernetes cluster for testing and learning purposes.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
This will not cover AKO, MAKO, Tanzu but just K8s!
</td>
</tr>
</table>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>Please be aware you will need to be in your home director. If you are not sure just exec cd and press enter.</p>
</div>
<div class="paragraph">
<p>Shotcut your typing</p>
</div>
<div class="listingblock">
<div class="content">
<pre>echo  "alias k=kubectl" &gt;&gt;~/.bashrc
echo "source &lt;(kubectl completion bash|sed s/kubectl/k/g)" &gt;&gt;.bashrc
. .bashrc</pre>
</div>
</div>
<div class="paragraph">
<p>Understand how to use help with kubectl. Each main subcommand has a subset of help. The main will be kubectl -h or kubectl --help. Of course, this workshop is not going through each of the commands, that&#8217;s something you can explore on your own. We will, however cover many of them.</p>
</div>
<div class="paragraph">
<p>Verbose and debug mode. Depending on what you are looking for, kubectl can help to display the API calls. Test it by starting with level 6 and then by checking the level 7, and debug 8 to see the different outputs.<br></p>
</div>
<div class="paragraph">
<p>You can also try debug level 9 for more verbosity and also level 10 if you really want to see all call, even it&#8217;s not listed on this page and it will have a lots of data!
<a href="https://kubernetes.io/docs/reference/kubectl/cheatsheet/">Kubernetes CheatSheet</a><br></p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
I assume you have set the alias above, as this workshop will use the short handed command.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre>k get -v6 pods</pre>
</div>
</div>
<div class="paragraph">
<p>Show Merged kubeconfig settings.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>k config view</pre>
</div>
</div>
<div class="paragraph">
<p>Use multiple kubeconfig files at the same time and view merged config</p>
</div>
<div class="listingblock">
<div class="content">
<pre>KUBECONFIG=~/.kube/config:~/.kube/kubconfig2</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>k config view</pre>
</div>
</div>
<div class="paragraph">
<p>Display list of contexts</p>
</div>
<div class="listingblock">
<div class="content">
<pre>k config get-contexts</pre>
</div>
</div>
<div class="paragraph">
<p>Display the current-context</p>
</div>
<div class="listingblock">
<div class="content">
<pre>k config current-context</pre>
</div>
</div>
<div class="paragraph">
<p>Set the default context to my-cluster-name, the name can be showed with the command above.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>k config use-context &lt;&lt;cluster-name&gt;&gt;
k config set-context kind-remo
k config -h &lt;to get some additional help&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>EXAMPLE:  (in my case I have two running, KIND and Minikube, and it shows you which is the default config)</p>
</div>
<div class="listingblock">
<div class="content">
<pre>k config get-contexts
CURRENT   NAME        CLUSTER     AUTHINFO    NAMESPACE
*         kind-kind   kind-kind   kind-kind
          minikube    minikube    minikube    default</pre>
</div>
</div>
<div class="paragraph">
<p>Add a new user to your kubeconf that supports basic auth. This command is very useful and many people leverage this on the fly to do testing.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>k config set-credentials kubeuser/foo.kubernetes.com --username=kubeuser --password=kubepassword</pre>
</div>
</div>
<div class="paragraph">
<p>Permanently save the namespace for all subsequent kubectl commands in that context.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>k config set-context --current --namespace=ciao</pre>
</div>
</div>
<div class="paragraph">
<p>Set a context utilizing a specific username and namespace.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>k config set-context gce --user=cluster-admin --namespace=ciao \
  &amp;&amp; k config use-context gce</pre>
</div>
</div>
<div class="paragraph">
<p>This unsets the config for the user ciao
k config unset users.ciao</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_single_cluster">Single Cluster</h2>
<div class="sectionbody">
<div class="paragraph">
<p>First let&#8217;s evaluate kind&#8217;s help</p>
</div>
<div class="listingblock">
<div class="content">
<pre>kind --help
kind creates and manages local Kubernetes clusters using Docker container 'nodes'

Usage:
  kind [command]

Available Commands:
  build       Build one of [node-image]
  completion  Output shell completion code for the specified shell (bash, zsh or fish)
  create      Creates one of [cluster]
  delete      Deletes one of [cluster]
  export      Exports one of [kubeconfig, logs]
  get         Gets one of [clusters, nodes, kubeconfig]
  help        Help about any command
  load        Loads images into nodes
  version     Prints the kind CLI version

Flags:
  -h, --help              help for kind
      --loglevel string   DEPRECATED: see -v instead
  -q, --quiet             silence all stderr output
  -v, --verbosity int32   info log verbosity
      --version           version for kind

Use "kind [command] --help" for more information about a command.</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>kind create cluster --name workshop</pre>
</div>
</div>
<div class="paragraph">
<p>OUTPUT:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>‚ûú kind create cluster --name workshop
Creating cluster "workshop" ...
 ‚úì Ensuring node image (kindest/node:v1.20.2) üñº
 ‚úì Preparing nodes üì¶
 ‚úì Writing configuration üìú
 ‚úì Starting control-plane üïπÔ∏è
 ‚úì Installing CNI üîå
 ‚úì Installing StorageClass üíæ
Set kubectl context to "kind-workshop"
You can now use your cluster with:

k cluster-info --context kind-workshop

Have a nice day! üëã</pre>
</div>
</div>
<div class="paragraph">
<p>Using kind command to verify we have a cluster</p>
</div>
<div class="listingblock">
<div class="content">
<pre>‚ûú kind get clusters</pre>
</div>
</div>
<div class="paragraph">
<p>OUTPUT:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>‚ûú kind get clusters
workshop</pre>
</div>
</div>
<div class="paragraph">
<p>Check nodes</p>
</div>
<div class="listingblock">
<div class="content">
<pre>‚ûú k get nodes</pre>
</div>
</div>
<div class="paragraph">
<p>OUTPUT:  We can see the workshop name for the control plane.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>‚ûú k get nodes
NAME                     STATUS   ROLES                  AGE   VERSION
workshop-control-plane   Ready    control-plane,master   11m   v1.20.2</pre>
</div>
</div>
<div class="paragraph">
<p>We will use the describe subcommand to see the details of the node.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>‚ûú k describe no &lt;&lt;your node name&gt;&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>‚ûú k describe no workshop-control-plane</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
the option no is short for nodes.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>OUTPUT:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>‚ûú k describe no workshop-control-plane
Name:               workshop-control-plane
Roles:              control-plane,master
Labels:             beta.kubernetes.io/arch=amd64
                    beta.kubernetes.io/os=linux
                    kubernetes.io/arch=amd64
                    kubernetes.io/hostname=workshop-control-plane
                    kubernetes.io/os=linux
                    node-role.kubernetes.io/control-plane=
                    node-role.kubernetes.io/master=
Annotations:        kubeadm.alpha.kubernetes.io/cri-socket: unix:///run/containerd/containerd.sock
                    node.alpha.kubernetes.io/ttl: 0
                    volumes.kubernetes.io/controller-managed-attach-detach: true
CreationTimestamp:  Wed, 12 May 2021 20:44:18 -0700
Taints:             &lt;none&gt;
Unschedulable:      false
Lease:
  HolderIdentity:  workshop-control-plane
  AcquireTime:     &lt;unset&gt;
  RenewTime:       Wed, 12 May 2021 21:09:02 -0700
Conditions:
  Type             Status  LastHeartbeatTime                 LastTransitionTime                Reason                       Message
  ----             ------  -----------------                 ------------------                ------                       -------
  MemoryPressure   False   Wed, 12 May 2021 21:05:02 -0700   Wed, 12 May 2021 20:44:17 -0700   KubeletHasSufficientMemory   kubelet has sufficient memory available
  DiskPressure     False   Wed, 12 May 2021 21:05:02 -0700   Wed, 12 May 2021 20:44:17 -0700   KubeletHasNoDiskPressure     kubelet has no disk pressure
  PIDPressure      False   Wed, 12 May 2021 21:05:02 -0700   Wed, 12 May 2021 20:44:17 -0700   KubeletHasSufficientPID      kubelet has sufficient PID available
  Ready            True    Wed, 12 May 2021 21:05:02 -0700   Wed, 12 May 2021 20:45:02 -0700   KubeletReady                 kubelet is posting ready status
Addresses:
  InternalIP:  172.18.0.2
  Hostname:    workshop-control-plane
Capacity:
  cpu:                8
  ephemeral-storage:  61255492Ki
  hugepages-1Gi:      0
  hugepages-2Mi:      0
  memory:             2034536Ki
  pods:               110
Allocatable:
  cpu:                8
  ephemeral-storage:  61255492Ki
  hugepages-1Gi:      0
  hugepages-2Mi:      0
  memory:             2034536Ki
  pods:               110
System Info:
  Machine ID:                 a7799064a9e74d6cb45448b4c172f5e0
  System UUID:                ff810c9a-bbad-4497-8ac1-f369ac65ce6e
  Boot ID:                    fb696cfd-2560-4842-9d50-7b84f86326a9
  Kernel Version:             5.10.25-linuxkit
  OS Image:                   Ubuntu 20.10
  Operating System:           linux
  Architecture:               amd64
  Container Runtime Version:  containerd://1.4.0-106-gce4439a8
  Kubelet Version:            v1.20.2
  Kube-Proxy Version:         v1.20.2
PodCIDR:                      10.244.0.0/24
PodCIDRs:                     10.244.0.0/24
ProviderID:                   kind://docker/workshop/workshop-control-plane
Non-terminated Pods:          (9 in total)
  Namespace                   Name                                              CPU Requests  CPU Limits  Memory Requests  Memory Limits  AGE
  ---------                   ----                                              ------------  ----------  ---------------  -------------  ---
  kube-system                 coredns-74ff55c5b-p2bch                           100m (1%)     0 (0%)      70Mi (3%)        170Mi (8%)     24m
  kube-system                 coredns-74ff55c5b-wk5d5                           100m (1%)     0 (0%)      70Mi (3%)        170Mi (8%)     24m
  kube-system                 etcd-workshop-control-plane                       100m (1%)     0 (0%)      100Mi (5%)       0 (0%)         24m
  kube-system                 kindnet-hfj8j                                     100m (1%)     100m (1%)   50Mi (2%)        50Mi (2%)      24m
  kube-system                 kube-apiserver-workshop-control-plane             250m (3%)     0 (0%)      0 (0%)           0 (0%)         24m
  kube-system                 kube-controller-manager-workshop-control-plane    200m (2%)     0 (0%)      0 (0%)           0 (0%)         24m
  kube-system                 kube-proxy-tqt8q                                  0 (0%)        0 (0%)      0 (0%)           0 (0%)         24m
  kube-system                 kube-scheduler-workshop-control-plane             100m (1%)     0 (0%)      0 (0%)           0 (0%)         24m
  local-path-storage          local-path-provisioner-78776bfc44-fg2hn           0 (0%)        0 (0%)      0 (0%)           0 (0%)         24m
Allocated resources:
  (Total limits may be over 100 percent, i.e., overcommitted.)
  Resource           Requests     Limits
  --------           --------     ------
  cpu                950m (11%)   100m (1%)
  memory             290Mi (14%)  390Mi (19%)
  ephemeral-storage  100Mi (0%)   0 (0%)
  hugepages-1Gi      0 (0%)       0 (0%)
  hugepages-2Mi      0 (0%)       0 (0%)
Events:
  Type     Reason                   Age                From        Message
  ----     ------                   ----               ----        -------
  Normal   NodeHasSufficientPID     24m (x4 over 25m)  kubelet     Node workshop-control-plane status is now: NodeHasSufficientPID
  Normal   NodeHasSufficientMemory  24m (x5 over 25m)  kubelet     Node workshop-control-plane status is now: NodeHasSufficientMemory
  Normal   NodeHasNoDiskPressure    24m (x5 over 25m)  kubelet     Node workshop-control-plane status is now: NodeHasNoDiskPressure
  Normal   Starting                 24m                kubelet     Starting kubelet.
  Normal   NodeHasSufficientMemory  24m                kubelet     Node workshop-control-plane status is now: NodeHasSufficientMemory
  Normal   NodeHasNoDiskPressure    24m                kubelet     Node workshop-control-plane status is now: NodeHasNoDiskPressure
  Normal   NodeHasSufficientPID     24m                kubelet     Node workshop-control-plane status is now: NodeHasSufficientPID
  Normal   NodeAllocatableEnforced  24m                kubelet     Updated Node Allocatable limit across pods
  Warning  readOnlySysFS            24m                kube-proxy  CRI error: /sys is read-only: cannot modify conntrack limits, problems may arise later (If running Docker, see docker issue #24000)
  Normal   Starting                 24m                kube-proxy  Starting kube-proxy.
  Normal   NodeReady                24m                kubelet     Node workshop-control-plane status is now: NodeReady</pre>
</div>
</div>
<div class="paragraph">
<p>Delete the current kind cluster. If you have the default cluster, named <strong>kind</strong>, you do not have to use the --name option.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>kind delete cluster --name workshop</pre>
</div>
</div>
<div class="paragraph">
<p>OUTPUT:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>‚ûú kind delete cluster --name workshop
Deleting cluster "workshop" ...</pre>
</div>
</div>
<div class="paragraph">
<p>Create a cluster with 3 workers. create a file, called mykind with the directions below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>‚ûú vi mykind</pre>
</div>
</div>
<div class="paragraph">
<p>Directives for the file mykind. This will build the control plane and 3 workers node.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>kind: Cluster
apiVersion: kind.x-k8s.io/v1alpha4
# One control plane node and three "workers".
#
# While these will not add more real compute capacity and
# have limited isolation, this can be useful for testing
# rolling updates etc.
#
# The API-server and other control plane components will be
# on the control-plane node.
#
# You probably don't need this unless you are testing Kubernetes itself.
nodes:
- role: control-plane
- role: worker
- role: worker
- role: worker</pre>
</div>
</div>
<div class="paragraph">
<p>To build the new cluster with 3 workers and 1 control-plane execute the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>kind create cluster --config mykind</pre>
</div>
</div>
<div class="paragraph">
<p>OUTPUT:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>‚ûú kind create cluster --config mykind
Creating cluster "kind" ...
 ‚úì Ensuring node image (kindest/node:v1.20.2) üñº
 ‚úì Preparing nodes üì¶ üì¶ üì¶ üì¶
 ‚úì Writing configuration üìú
 ‚úì Starting control-plane üïπÔ∏è
 ‚úì Installing CNI üîå
 ‚úì Installing StorageClass üíæ
 ‚úì Joining worker nodes üöú
Set kubectl context to "kind-kind"
You can now use your cluster with:

k cluster-info --context kind-kind

Thanks for using kind! üòä</pre>
</div>
</div>
<div class="paragraph">
<p>Check nodes</p>
</div>
<div class="listingblock">
<div class="content">
<pre>‚ûú k get nodes</pre>
</div>
</div>
<div class="paragraph">
<p>OUTPUT:  We can see the workshop name for the control plane.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>‚ûú k get nodes
NAME                 STATUS   ROLES                  AGE     VERSION
kind-control-plane   Ready    control-plane,master   2m35s   v1.20.2
kind-worker          Ready    &lt;none&gt;                 2m4s    v1.20.2
kind-worker2         Ready    &lt;none&gt;                 2m4s    v1.20.2
kind-worker3         Ready    &lt;none&gt;                 2m4s    v1.20.2</pre>
</div>
</div>
<div class="paragraph">
<p>OUTPUT: with the wide option</p>
</div>
<div class="paragraph">
<p>As you recall from our docker section, we will check how many containers are running in docker.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>‚ûú docker ps</pre>
</div>
</div>
<div class="paragraph">
<p>OUTPUT:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>‚ûú  docker ps
CONTAINER ID   IMAGE                  COMMAND                  CREATED         STATUS         PORTS                       NAMES
4edfee1fd18f   kindest/node:v1.20.2   "/usr/local/bin/entr‚Ä¶"   3 minutes ago   Up 3 minutes   127.0.0.1:54190-&gt;6443/tcp   kind-control-plane
5671a7b7c983   kindest/node:v1.20.2   "/usr/local/bin/entr‚Ä¶"   3 minutes ago   Up 3 minutes                               kind-worker3
29c2eb8fa722   kindest/node:v1.20.2   "/usr/local/bin/entr‚Ä¶"   3 minutes ago   Up 3 minutes                               kind-worker2
0812af2b6e37   kindest/node:v1.20.2   "/usr/local/bin/entr‚Ä¶"   3 minutes ago   Up 3 minutes                               kind-worker</pre>
</div>
</div>
<div class="paragraph">
<p>Once kubectl and kind are ready, open bash console and run this command.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>k cluster-info</pre>
</div>
</div>
<div class="paragraph">
<p>OUTPUT:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>k cluster-info
Kubernetes control plane is running at https://127.0.0.1:39553
KubeDNS is running at https://127.0.0.1:39553/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy

To further debug and diagnose cluster problems, use 'kubectl cluster-info dump'.</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_lets_check_the_vscode_kube_cluster_window_we_will_see_the_nodes_there_lets_verify_them_with_the_cli">Let&#8217;s check the vscode kube cluster window we will see the nodes there let&#8217;s verify them with the cli</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Install Vscode, on CentOS 7, the latest version does not work, here is a link to download the version that works.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>https://code.visualstudio.com/updates/v1_52</pre>
</div>
</div>
<div class="paragraph">
<p>Once downloaded install it example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>sudo yum install code-1.52.1-1608137084.el7.x86_64.rpm</pre>
</div>
</div>
<div class="paragraph">
<p>Open vscode, from the cli type <strong>code</strong>, Since this is an overview, we are not going to use VSCode that much, just wanted to share so you could take advantage of the great plugin offered within the VSCode community.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./vscode.png" alt="vscode">
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>‚ûú  k get nodes</pre>
</div>
</div>
<div class="paragraph">
<p>OUTPUT:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>NAME                 STATUS   ROLES                  AGE     VERSION
kind-control-plane   Ready    control-plane,master   7m14s   v1.20.2
kind-worker          Ready    &lt;none&gt;                 6m45s   v1.20.2
kind-worker2         Ready    &lt;none&gt;                 6m46s   v1.20.2
kind-worker3         Ready    &lt;none&gt;                 6m46s   v1.20.2</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_build_a_frontend_using_wordpress_and_backend_using_mysql">Build a frontend using wordpress and backend using mysql</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Luckily, there is an official tutorial which is pretty well described. We can try most steps of it using kind cluster which we just created.
<a href="https://kubernetes.io/docs/tutorials/stateful-application/mysql-wordpress-persistent-volume/">Kubernetes Docs</a></p>
</div>
<div class="paragraph">
<p>We will create 3 files and add the following data.</p>
</div>
<div class="paragraph">
<p>First we make a dir/folder</p>
</div>
<div class="listingblock">
<div class="content">
<pre>mkdir k8folder</pre>
</div>
</div>
<div class="paragraph">
<p>We will cd into the folder k8folder before we do the next steps.</p>
</div>
<div class="listingblock">
<div class="title">You can copy and paste it, which creates a secret and sets a password to avidemo.</div>
<div class="content">
<pre>‚ûú cat &lt;&lt;EOF &gt;./kustomization.yaml
secretGenerator:
- name: mysql-pass
  literals:
  - password=avidemo
EOF</pre>
</div>
</div>
<div class="paragraph">
<p>OUTPUT:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>‚ûú cat kustomization.yaml
secretGenerator:
- name: mysql-pass
  literals:
  - password=avidemo</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Now we will get the mysql deployment, the curl will save the file locally.</div>
<div class="content">
<pre>‚ûú curl -LO https://k8s.io/examples/application/wordpress/mysql-deployment.yaml</pre>
</div>
</div>
<div class="paragraph">
<p>OUTPUT:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>‚ûú curl -LO https://k8s.io/examples/application/wordpress/mysql-deployment.yaml
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   178  100   178    0     0    751      0 --:--:-- --:--:-- --:--:--   751
100  1193  100  1193    0     0   2475      0 --:--:-- --:--:-- --:--:-- 17289</pre>
</div>
</div>
<div class="paragraph">
<p>READ mysql deployment file and change the 20Gi to 10Gi</p>
</div>
<div class="listingblock">
<div class="content">
<pre>‚ûú cat mysql-deployment.yaml
apiVersion: v1
kind: Service
metadata:
  name: wordpress-mysql
  labels:
    app: wordpress
spec:
  ports:
    - port: 3306
  selector:
    app: wordpress
    tier: mysql
  clusterIP: None
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: mysql-pv-claim
  labels:
    app: wordpress
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 20Gi
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: wordpress-mysql
  labels:
    app: wordpress
spec:
  selector:
    matchLabels:
      app: wordpress
      tier: mysql
  strategy:
    type: Recreate
  template:
    metadata:
      labels:
        app: wordpress
        tier: mysql
    spec:
      containers:
      - image: mysql:5.6
        name: mysql
        env:
        - name: MYSQL_ROOT_PASSWORD
          valueFrom:
            secretKeyRef:
              name: mysql-pass
              key: password
        ports:
        - containerPort: 3306
          name: mysql
        volumeMounts:
        - name: mysql-persistent-storage
          mountPath: /var/lib/mysql
      volumes:
      - name: mysql-persistent-storage
        persistentVolumeClaim:
          claimName: mysql-pv-claim</pre>
</div>
</div>
<div class="paragraph">
<p>We notice the version of MySQL as well as the key for the password. In addition we will be able to see the port used by the container.</p>
</div>
<div class="listingblock">
<div class="title">We will now get the wordpress deployment as well, using curl.</div>
<div class="content">
<pre>‚ûú curl -LO https://k8s.io/examples/application/wordpress/wordpress-deployment.yaml</pre>
</div>
</div>
<div class="paragraph">
<p>OUTPUT:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>‚ûú curl -LO https://k8s.io/examples/application/wordpress/wordpress-deployment.yaml
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   178  100   178    0     0   2022      0 --:--:-- --:--:-- --:--:--  2000
100  1278  100  1278    0     0   7139      0 --:--:-- --:--:-- --:--:--  7139</pre>
</div>
</div>
<div class="paragraph">
<p>READ wordpress deployment file and change the 20Gi to 10Gi</p>
</div>
<div class="listingblock">
<div class="content">
<pre>‚ûú cat wordpress-deployment.yaml
apiVersion: v1
kind: Service
metadata:
  name: wordpress
  labels:
    app: wordpress
spec:
  ports:
    - port: 80
  selector:
    app: wordpress
    tier: frontend
  type: LoadBalancer
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: wp-pv-claim
  labels:
    app: wordpress
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 20Gi
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: wordpress
  labels:
    app: wordpress
spec:
  selector:
    matchLabels:
      app: wordpress
      tier: frontend
  strategy:
    type: Recreate
  template:
    metadata:
      labels:
        app: wordpress
        tier: frontend
    spec:
      containers:
      - image: wordpress:4.8-apache
        name: wordpress
        env:
        - name: WORDPRESS_DB_HOST
          value: wordpress-mysql
        - name: WORDPRESS_DB_PASSWORD
          valueFrom:
            secretKeyRef:
              name: mysql-pass
              key: password
        ports:
        - containerPort: 80
          name: wordpress
        volumeMounts:
        - name: wordpress-persistent-storage
          mountPath: /var/www/html
      volumes:
      - name: wordpress-persistent-storage
        persistentVolumeClaim:
          claimName: wp-pv-claim</pre>
</div>
</div>
<div class="paragraph">
<p>As well as mysql, we can see which port is used and which image is going to be launched for the frontend wordpress.</p>
</div>
<div class="paragraph">
<p>As we have downloaded the two files for our deployment, we will now add the resources into our original file called kustomization. The following data will be appended.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>cat &lt;&lt;EOF &gt;&gt;./kustomization.yaml
resources:
  - mysql-deployment.yaml
  - wordpress-deployment.yaml
EOF</pre>
</div>
</div>
<div class="paragraph">
<p>Let&#8217;s look how the file is now constructed</p>
</div>
<div class="listingblock">
<div class="content">
<pre>‚ûú cat kustomization.yaml
secretGenerator:
- name: mysql-pass
  literals:
  - password=avidemo
resources:
  - mysql-deployment.yaml
  - wordpress-deployment.yaml</pre>
</div>
</div>
<div class="paragraph">
<p>As we have all our files and configuration we will execute them using the kubectl command to start the deployment. Instead of running each command separately, we will leverage the flag -k.<br></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
from the help the -k shows us the following:
      -k, --kustomize='': Process a kustomization directory. This flag can&#8217;t be used together with -f or -R.
      --openapi-patch=true: If true, use openapi to calculate diff when the openapi presents and the resource can be
      found in the openapi spec. Otherwise, fall back to use baked-in types.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre>k apply -k ./</pre>
</div>
</div>
<div class="paragraph">
<p>OUTPUT:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>‚ûú k apply -k .
secret/mysql-pass-7564dm6k4b created
service/wordpress-mysql created
service/wordpress created
deployment.apps/wordpress-mysql created
deployment.apps/wordpress created
persistentvolumeclaim/mysql-pv-claim created
persistentvolumeclaim/wp-pv-claim created</pre>
</div>
</div>
<div class="paragraph">
<p>Now let&#8217;s check the secrets.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>k get secrets</pre>
</div>
</div>
<div class="paragraph">
<p>OUTPUT:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>k get secrets
NAME                    TYPE                                  DATA   AGE
default-token-rkcdp     kubernetes.io/service-account-token   3      22h
mysql-pass-7564dm6k4b   Opaque                                1      79s</pre>
</div>
</div>
<div class="paragraph">
<p>We want to get a little more information from that, therefore, we will run the describe flag.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>k describe secrets mysql-pass</pre>
</div>
</div>
<div class="paragraph">
<p>OUTPUT:</p>
</div>
<div class="listingblock">
<div class="content">
<pre> ‚ûú k describe secrets mysql-pass
Name:         mysql-pass-7564dm6k4b
Namespace:    default
Labels:       &lt;none&gt;
Annotations:  &lt;none&gt;

Type:  Opaque

Data
====
password:  6 bytes</pre>
</div>
</div>
<div class="paragraph">
<p>Let&#8217;s get verify the password we set. We will use the jsonpath for this command and base64 to read the data above called password.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>k get secrets mysql-pass-28kbb7fbdm -o jsonpath="{.data.password}"|base64 --decode</pre>
</div>
</div>
<div class="paragraph">
<p>OUTPUT:</p>
</div>
<div class="listingblock">
<div class="content">
<pre> k get secrets mysql-pass-28kbb7fbdm -o jsonpath='{.data.password}' | base64 --decode
ciao[student@ip-10-1-1-6]$</pre>
</div>
</div>
<div class="paragraph">
<p>To confirm the value in the POD we will exec into the POD.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>k exec -it wordpress-mysql-5f7dc9d95d-zrzg5 -- env|grep -i pass</pre>
</div>
</div>
<div class="paragraph">
<p>OUTPUT:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>k exec -it wordpress-mysql-5f7dc9d95d-zrzg5 -- env|grep -i pass
MYSQL_ROOT_PASSWORD=ciao</pre>
</div>
</div>
<div class="paragraph">
<p>We do, however want to understand how storage is used on the container, and what we built with K8s. If you scroll up you will see the reference Volumes and the name used for that container. Therefore, we want to check that out.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>k get pvc,pv</pre>
</div>
</div>
<div class="paragraph">
<p>OUTPUT:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>k get pvc,pv
NAME                                   STATUS   VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS   AGE
persistentvolumeclaim/mysql-pv-claim   Bound    pvc-04383fcb-9964-419e-9287-65a6692b7fff   10Gi       RWO            standard       4m21s
persistentvolumeclaim/wp-pv-claim      Bound    pvc-75b7e03f-d4b4-46e9-8393-c61be247e95f   10Gi       RWO            standard       4m21s

NAME                                                        CAPACITY   ACCESS MODES   RECLAIM POLICY   STATUS   CLAIM                    STORAGECLASS   REASON   AGE
persistentvolume/pvc-04383fcb-9964-419e-9287-65a6692b7fff   10Gi       RWO            Delete           Bound    default/mysql-pv-claim   standard                4m17s
persistentvolume/pvc-75b7e03f-d4b4-46e9-8393-c61be247e95f   10Gi       RWO            Delete           Bound    default/wp-pv-claim      standard                4m18s</pre>
</div>
</div>
<div class="paragraph">
<p>As we can see the name matches with what&#8217;s in the describe.</p>
</div>
<div class="paragraph">
<p>As we have started our deployment, now let&#8217;s check our pods. The second command is giving you the exact output of the first, however, less typing.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>k get pods (full)
k get po</pre>
</div>
</div>
<div class="paragraph">
<p>We want to use services in K8s for many reason we have discussed during our presentation, now let&#8217;s check them.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>k get services &lt;name of the services&gt;
k get svc &lt;name of the services &gt;</pre>
</div>
</div>
<div class="paragraph">
<p>OUTPUT:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>k get svc
NAME              TYPE           CLUSTER-IP     EXTERNAL-IP   PORT(S)        AGE
kubernetes        ClusterIP      10.96.0.1      &lt;none&gt;        443/TCP        22h
wordpress         LoadBalancer   10.96.212.79   &lt;pending&gt;     80:30782/TCP   12m
wordpress-mysql   ClusterIP      None           &lt;none&gt;        3306/TCP       12m</pre>
</div>
</div>
<div class="paragraph">
<p>The above command shows you what&#8217;s in the default namespace, if you want or need to check out a specific namespace, then you can use the -A option or -n follow by the namespace name. Furthermore,</p>
</div>
<div class="paragraph">
<p>OUTPUT -A</p>
</div>
<div class="listingblock">
<div class="content">
<pre>‚ûú k get svc -A
NAMESPACE     NAME              TYPE           CLUSTER-IP     EXTERNAL-IP   PORT(S)                  AGE
default       kubernetes        ClusterIP      10.96.0.1      &lt;none&gt;        443/TCP                  22h
default       wordpress         LoadBalancer   10.96.212.79   &lt;pending&gt;     80:30782/TCP             12m
default       wordpress-mysql   ClusterIP      None           &lt;none&gt;        3306/TCP                 12m
kube-system   kube-dns          ClusterIP      10.96.0.10     &lt;none&gt;        53/UDP,53/TCP,9153/TCP   22h</pre>
</div>
</div>
<div class="paragraph">
<p>Endpoints are important and therefore we want to get as much data as possible. Example: (ip addresses of the pods). If the POD does not have an endpoint there is no svc associated with the pod.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>k get endpoints</pre>
</div>
</div>
<div class="paragraph">
<p>OUTPUT:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>‚ûú k get endpoints
NAME              ENDPOINTS         AGE
kubernetes        172.18.0.4:6443   22h
wordpress         10.244.1.3:80     15m
wordpress-mysql   10.244.3.3:3306   15m</pre>
</div>
</div>
<div class="paragraph">
<p>If we are looking at this, we can detect that each node has it&#8217;s block, 10.244.1.x for pod 3, 10.244.3.x for pod 2 etc.</p>
</div>
<div class="paragraph">
<p>To make sure that&#8217;s the case, let&#8217;s check to confirm</p>
</div>
<div class="listingblock">
<div class="content">
<pre> ‚ûú k describe node kind-worker2
Name:               kind-worker2
Roles:              &lt;none&gt;
Labels:             beta.kubernetes.io/arch=amd64
                    beta.kubernetes.io/os=linux
                    kubernetes.io/arch=amd64
                    kubernetes.io/hostname=kind-worker2
                    kubernetes.io/os=linux
Annotations:        kubeadm.alpha.kubernetes.io/cri-socket: unix:///run/containerd/containerd.sock
                    node.alpha.kubernetes.io/ttl: 0
                    volumes.kubernetes.io/controller-managed-attach-detach: true
CreationTimestamp:  Thu, 13 May 2021 12:35:30 -0700
Taints:             &lt;none&gt;
Unschedulable:      false
Lease:
  HolderIdentity:  kind-worker2
  AcquireTime:     &lt;unset&gt;
  RenewTime:       Fri, 14 May 2021 11:19:34 -0700
Conditions:
  Type             Status  LastHeartbeatTime                 LastTransitionTime                Reason                       Message
  ----             ------  -----------------                 ------------------                ------                       -------
  MemoryPressure   False   Fri, 14 May 2021 11:15:44 -0700   Thu, 13 May 2021 12:35:30 -0700   KubeletHasSufficientMemory   kubelet has sufficient memory available
  DiskPressure     False   Fri, 14 May 2021 11:15:44 -0700   Thu, 13 May 2021 12:35:30 -0700   KubeletHasNoDiskPressure     kubelet has no disk pressure
  PIDPressure      False   Fri, 14 May 2021 11:15:44 -0700   Thu, 13 May 2021 12:35:30 -0700   KubeletHasSufficientPID      kubelet has sufficient PID available
  Ready            True    Fri, 14 May 2021 11:15:44 -0700   Thu, 13 May 2021 12:35:51 -0700   KubeletReady                 kubelet is posting ready status
Addresses:
  InternalIP:  172.18.0.3
  Hostname:    kind-worker2
Capacity:
  cpu:                8
  ephemeral-storage:  61255492Ki
  hugepages-1Gi:      0
  hugepages-2Mi:      0
  memory:             2034536Ki
  pods:               110
Allocatable:
  cpu:                8
  ephemeral-storage:  61255492Ki
  hugepages-1Gi:      0
  hugepages-2Mi:      0
  memory:             2034536Ki
  pods:               110
System Info:
  Machine ID:                 d1c0cbc1360a42b1b615caf2d2d8e63e
  System UUID:                09dc1919-355b-4353-b8cf-d58045111f27
  Boot ID:                    ea3c38c2-56e1-41d4-8392-74320225a7a2
  Kernel Version:             5.10.25-linuxkit
  OS Image:                   Ubuntu 20.10
  Operating System:           linux
  Architecture:               amd64
  Container Runtime Version:  containerd://1.4.0-106-gce4439a8
  Kubelet Version:            v1.20.2
  Kube-Proxy Version:         v1.20.2
PodCIDR:                      10.244.3.0/24
PodCIDRs:                     10.244.3.0/24
ProviderID:                   kind://docker/kind/kind-worker2
Non-terminated Pods:          (3 in total)
  Namespace                   Name                               CPU Requests  CPU Limits  Memory Requests  Memory Limits  AGE
  ---------                   ----                               ------------  ----------  ---------------  -------------  ---
  default                     wordpress-mysql-dd6c4c7c9-mkxfp    0 (0%)        0 (0%)      0 (0%)           0 (0%)         19m
  kube-system                 kindnet-mnhvz                      100m (1%)     100m (1%)   50Mi (2%)        50Mi (2%)      22h
  kube-system                 kube-proxy-m87sm                   0 (0%)        0 (0%)      0 (0%)           0 (0%)         22h
Allocated resources:
  (Total limits may be over 100 percent, i.e., overcommitted.)
  Resource           Requests   Limits
  --------           --------   ------
  cpu                100m (1%)  100m (1%)
  memory             50Mi (2%)  50Mi (2%)
  ephemeral-storage  0 (0%)     0 (0%)
  hugepages-1Gi      0 (0%)     0 (0%)
  hugepages-2Mi      0 (0%)     0 (0%)
Events:              &lt;none&gt;</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Check the cidr for that node.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Now we are at the final steps to access our application. As we have talked, there are 3 type in Kubernetes which allows you to access the container. One is NodePort, (not suggested for produciton), default is ClusterIP, which allows communication between the pods, and the last one is LoadBalancer, but we do not have an IPAM which gives us an IP address. Therefore, we will use port-forward to test the application we just span up.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>k port-forward svc/wordpress 8000:80</pre>
</div>
</div>
<div class="paragraph">
<p>OUTPUT:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>k port-forward svc/wordpress 8000:80
Forwarding from 127.0.0.1:8000 -&gt; 80
Forwarding from [::1]:8000 -&gt; 80</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
do not break out from the terminal otherwise you will not be able to access the application. Open a new terminal.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>As we have a MySQL container, and we know there is a password we set let&#8217;s evaluate the pod. Find the password from the container info</p>
</div>
<div class="listingblock">
<div class="content">
<pre>k describe po wordpress-mysql (look for the MYSQL_ROOT_PASSWORD).</pre>
</div>
</div>
<div class="paragraph">
<p>OUTPUT:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>‚ûú k describe po wordpress-mysql
Name:         wordpress-mysql-dd6c4c7c9-mkxfp
Namespace:    default
Priority:     0
Node:         kind-worker2/172.18.0.3
Start Time:   Fri, 14 May 2021 11:00:05 -0700
Labels:       app=wordpress
              pod-template-hash=dd6c4c7c9
              tier=mysql
Annotations:  &lt;none&gt;
Status:       Running
IP:           10.244.3.3
IPs:
  IP:           10.244.3.3
Controlled By:  ReplicaSet/wordpress-mysql-dd6c4c7c9
Containers:
  mysql:
    Container ID:   containerd://ca5c4a78d86a36a220aaf6c16e5e3af762b25d03ebd56f6633dfb80bba237d91
    Image:          mysql:5.6
    Image ID:       docker.io/library/mysql@sha256:1d96ea86f9173607f1534c05041bf18dba691ded86d2ab51f6fd4533377fac39
    Port:           3306/TCP
    Host Port:      0/TCP
    State:          Running
      Started:      Fri, 14 May 2021 11:00:15 -0700
    Ready:          True
    Restart Count:  0
    Environment:
      MYSQL_ROOT_PASSWORD:  &lt;set to the key 'password' in secret 'mysql-pass-7564dm6k4b'&gt;  Optional: false
    Mounts:
      /var/lib/mysql from mysql-persistent-storage (rw)
      /var/run/secrets/kubernetes.io/serviceaccount from default-token-rkcdp (ro)
Conditions:
  Type              Status
  Initialized       True
  Ready             True
  ContainersReady   True
  PodScheduled      True
Volumes:
  mysql-persistent-storage:
    Type:       PersistentVolumeClaim (a reference to a PersistentVolumeClaim in the same namespace)
    ClaimName:  mysql-pv-claim
    ReadOnly:   false
  default-token-rkcdp:
    Type:        Secret (a volume populated by a Secret)
    SecretName:  default-token-rkcdp
    Optional:    false
QoS Class:       BestEffort
Node-Selectors:  &lt;none&gt;
Tolerations:     node.kubernetes.io/not-ready:NoExecute op=Exists for 300s
                 node.kubernetes.io/unreachable:NoExecute op=Exists for 300s
Events:
  Type    Reason     Age   From               Message
  ----    ------     ----  ----               -------
  Normal  Scheduled  27m   default-scheduler  Successfully assigned default/wordpress-mysql-dd6c4c7c9-mkxfp to kind-worker2
  Normal  Pulling    27m   kubelet            Pulling image "mysql:5.6"
  Normal  Pulled     27m   kubelet            Successfully pulled image "mysql:5.6" in 8.7183841s
  Normal  Created    27m   kubelet            Created container mysql
  Normal  Started    27m   kubelet            Started container mysql</pre>
</div>
</div>
<div class="paragraph">
<p>Now let&#8217;s open firefox and go to</p>
</div>
<div class="listingblock">
<div class="content">
<pre>localhost:8000</pre>
</div>
</div>
<div class="paragraph">
<p>Spend a few min configuring your new application.<br></p>
</div>
<div class="paragraph">
<p><strong>Optional Lab</strong>,<br>
to see how scale works we will start with one and then scale up and down.</p>
</div>
<div class="paragraph">
<p>Scale example:<br>
Run a new deployment<br></p>
</div>
<div class="listingblock">
<div class="content">
<pre>k create deployment grey --image=itlinux/httpd_grey</pre>
</div>
</div>
<div class="paragraph">
<p>OUTPUT:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>k get deploy
NAME              READY   UP-TO-DATE   AVAILABLE   AGE
grey              1/1     1            0           13s
wordpress         1/1     1            1           36m
wordpress-mysql   1/1     1            1           36m</pre>
</div>
</div>
<div class="paragraph">
<p>Now let&#8217;s levarage help</p>
</div>
<div class="listingblock">
<div class="content">
<pre>k scale -h</pre>
</div>
</div>
<div class="paragraph">
<p>OUTPUT:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>‚ûú k scale -h
Set a new size for a Deployment, ReplicaSet, Replication Controller, or StatefulSet.

 Scale also allows users to specify one or more preconditions for the scale action.

 If --current-replicas or --resource-version is specified, it is validated before the scale is attempted, and it is
guaranteed that the precondition holds true when the scale is sent to the server.

Examples:
  # Scale a replicaset named 'foo' to 3.
  kubectl scale --replicas=3 rs/foo

  # Scale a resource identified by type and name specified in "foo.yaml" to 3.
  kubectl scale --replicas=3 -f foo.yaml

  # If the deployment named mysql's current size is 2, scale mysql to 3.
  kubectl scale --current-replicas=2 --replicas=3 deployment/mysql

  # Scale multiple replication controllers.
  kubectl scale --replicas=5 rc/foo rc/bar rc/baz

  # Scale statefulset named 'web' to 3.
  kubectl scale --replicas=3 statefulset/web

Options:
      --all=false: Select all resources in the namespace of the specified resource types
      --allow-missing-template-keys=true: If true, ignore any errors in templates when a field or map key is missing in
the template. Only applies to golang and jsonpath output formats.
      --current-replicas=-1: Precondition for current size. Requires that the current size of the resource match this
value in order to scale.
      --dry-run='none': Must be "none", "server", or "client". If client strategy, only print the object that would be
sent, without sending it. If server strategy, submit server-side request without persisting the resource.
  -f, --filename=[]: Filename, directory, or URL to files identifying the resource to set a new size
  -k, --kustomize='': Process the kustomization directory. This flag can't be used together with -f or -R.
  -o, --output='': Output format. One of:
json|yaml|name|go-template|go-template-file|template|templatefile|jsonpath|jsonpath-as-json|jsonpath-file.
      --record=false: Record current kubectl command in the resource annotation. If set to false, do not record the
command. If set to true, record the command. If not set, default to updating the existing annotation value only if one
already exists.
  -R, --recursive=false: Process the directory used in -f, --filename recursively. Useful when you want to manage
related manifests organized within the same directory.
      --replicas=0: The new desired number of replicas. Required.
      --resource-version='': Precondition for resource version. Requires that the current resource version match this
value in order to scale.
  -l, --selector='': Selector (label query) to filter on, supports '=', '==', and '!='.(e.g. -l key1=value1,key2=value2)
      --template='': Template string or path to template file to use when -o=go-template, -o=go-template-file. The
template format is golang templates [http://golang.org/pkg/text/template/#pkg-overview].
      --timeout=0s: The length of time to wait before giving up on a scale operation, zero means don't wait. Any other
values should contain a corresponding time unit (e.g. 1s, 2m, 3h).

Usage:
  kubectl scale [--resource-version=version] [--current-replicas=count] --replicas=COUNT (-f FILENAME | TYPE NAME)
[options]

Use "kubectl options" for a list of global command-line options (applies to all commands).</pre>
</div>
</div>
<div class="paragraph">
<p>We notice in the Examples a scale for the deployment. Therefore, we will use a similar one, but first let&#8217;s check our pods.</p>
</div>
<div class="listingblock">
<div class="title">Pods</div>
<div class="content">
<pre>‚ûú k get pods
NAME                              READY   STATUS    RESTARTS   AGE
grey-664f87894f-zr52n             1/1     Running   0          3m12s
wordpress-9f58bb5bc-pdn7r         1/1     Running   0          39m
wordpress-mysql-dd6c4c7c9-mkxfp   1/1     Running   0          39m</pre>
</div>
</div>
<div class="paragraph">
<p>We do see there is only one grey pod. Now let&#8217;s scale up. But before we scale let&#8217;s make sure we can access the new container.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>k port-forward deployment/grey 8222:80</pre>
</div>
</div>
<div class="paragraph">
<p>Open firefox at</p>
</div>
<div class="listingblock">
<div class="content">
<pre>localhost:8222</pre>
</div>
</div>
<div class="paragraph">
<p>Or
from the cli</p>
</div>
<div class="listingblock">
<div class="content">
<pre>curl http://127.0.0.1:8222</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Scale our Pod</div>
<div class="content">
<pre>‚ûú k scale --current-replicas=1 --replicas=3 deployment/grey</pre>
</div>
</div>
<div class="paragraph">
<p>Now let&#8217;s check pods again.
.Pods</p>
</div>
<div class="listingblock">
<div class="content">
<pre>‚ûú k get pods
NAME                              READY   STATUS    RESTARTS   AGE
grey-664f87894f-542xl             1/1     Running   0          13s
grey-664f87894f-8wvm5             1/1     Running   0          13s
grey-664f87894f-zr52n             1/1     Running   0          4m54s
wordpress-9f58bb5bc-pdn7r         1/1     Running   0          41m
wordpress-mysql-dd6c4c7c9-mkxfp   1/1     Running   0          41m</pre>
</div>
</div>
<div class="paragraph">
<p>As well as we scaled up we can now scale down. Similar command.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>‚ûú k scale --current-replicas=3 --replicas=1 deployment/grey</pre>
</div>
</div>
<div class="paragraph">
<p>OUTPUT:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>‚ûú k get pods
NAME                              READY   STATUS        RESTARTS   AGE
grey-664f87894f-542xl             1/1     Running       0          2m13s
grey-664f87894f-8wvm5             1/1     Terminating   0          2m13s
grey-664f87894f-zr52n             1/1     Terminating   0          6m54s
wordpress-9f58bb5bc-pdn7r         1/1     Running       0          43m
wordpress-mysql-dd6c4c7c9-mkxfp   1/1     Running       0          43m</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
your application still runs :) even when we scaled down.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If we want to access a specific worker node where the app is running for the grey app, you can use the following as an example, your id maybe diff:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>k port-forward grey-5794d7f866-w8t98 8088:80</pre>
</div>
</div>
<div class="paragraph">
<p>This ends the lab. <br>
Thanks</p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2022-04-21 15:39:20 -0700
</div>
</div>
</body>
</html>